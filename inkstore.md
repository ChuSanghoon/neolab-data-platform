### 3. 서비스

------

#### Inkstore

###### 개요

잉크스토어(Inkstore)는 데이터 저장소 서비스로 애플리케이션에서 생성한 사용자 데이터(User-Data)를 동기화 할 수 있게 하는 서비스입니다. 잉크스토어의 API를 통해 각 애플리케이션은 사용자 데이터를 업로드하고 다운로드하여 데이터를 동기화할 수 있습니다. 

비정형의 데이터를 저장할 수 있으므로 데이터 양식에 제약은 없지만, 최적화된 사용자 데이터는 사용자(회원)의 잉크 데이터입니다. 잉크 데이터는 사용자가 필기하면서 생성한 스트로크 데이터, 잉크링크로 필기하며 생성한 링크 데이터 등 다양한 데이터를 포함합니다. 잉크스토어는 별도의 스키마가 없고, 비정형의 바이너리 형태의 데이터를 취급하므로 애플리케이션은 사용자 데이터를 Base64로 인코딩한 형태로 업로드해야 합니다. 

```markdown
💡 참고 | 잉크스토어의 하나의 문서는 최대 1MB의 저장공간을 갖는다. 따라서 사용자가 생성한 대용량 파일을 동기화하기 위해서는 파일을 일정 용량 단위로 분할하여 올리거나, 별도의 Storage서비스를 이용하여야 한다.
```

잉크스토어는 사용자(회원) 단위 서비스로, 잉크스토어를 사용하기 위해서는 사용자 인증서가 필요합니다. 사용자 데이터는 사용자(회원) 별로 구분되어 저장됩니다. 기본적으로 한 애플리케이션은 해당 애플리케이션으로 업로드한 데이터에만 접근이 가능합니다. 즉, 다른 애플리케이션에서 업로드한 데이터에는 접근할 수 없습니다. 잉크스토어의 자세한 스펙은 [REST API](https://apis.neolab.net/swagger-ui.html?urls.primaryName=3.%20inkstore)에서 확인할 수 있습니다. 

잉크데이터는 기본적으로 순서가 보장되어 있어야 합니다.잉크스토어는 비정형의 데이터의 저장과, 순차적인 접근에 적합한 구조로 되어 있습니다.(순차적인 조회에 최적화 되어 있지만, 랜덤 접근이 용이하도록 데이터에 태그를 지원합니다.)
사용자는 데이터를 업로드 할때 데이터의 타입(Media-Type)을 지정해야 합니다.네오랩이 정한 잉크 데이터 타입에 맞춰 데이터를 생성해 올리면 플랫폼은 해당 데이터를 잉크 데이터로 인식합니다. 연결된 여러 서비스는 해당 데이터를 각각의 용도에 맞게 가공하거나 활용하게 됩니다.

***데이터의 활용 및 분석에 많이 사용되는 각종 오픈 소스 도구들도 잉크스토어에서 제공하는(할?) 커넥터를 사용하면 연동하여 사용할 수 있습니다.***

###### 전체 구조도

###### 용어 · 요소 설명

- **핸들**  
  잉크스토어에 사용자 데이터를 업로드하고 다운로드할 때 사용하는 도구(?)입니다. NDP는 핸들을 통해 해당 데이터를 업로드한 애플리케이션이 무엇인지 식별합니다. 애플리케이션은 사용자 데이터를 업로드할 때 핸들을 사용할 수도 있고, 사용하지 않을 수도 있습니다. 핸들을 사용하여 사용자 데이터를 업로드하는 경우, 각 애플리케이션은 디바이스 별로 핸들을 생성하고, 핸들 정보를 저장해주어야 합니다.

  핸들에 속한 주요 요소는 다음과 같습니다.  
  - user_id : 해당 핸들을 만든 사용자(회원) 아이디입니다.
  - application_id : 해당 핸들을 만든 애플리케이션 고유 번호입니다.
  - data_pointer : 해당 핸들로 동기화를 완료한 데이터의 지점(seq)입니다.
